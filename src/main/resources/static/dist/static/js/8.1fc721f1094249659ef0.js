webpackJsonp([8],{"/MqV":function(t,e){},GSyB:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=i("3cXf"),s=i.n(a),r={name:"rightTable",data:function(){return{url:"/getRight",tableData:[],cur_page:1,multipleSelection:[],select_cate:"",select_word:"",del_list:[],is_search:!1,editVisible:!1,delVisible:!1,editPasswordVisible:!1,changeStateToFrozenVisible:!1,changeStateToNormalVisible:!1,addRightVisible:!1,handleVisible:!0,form:{id:"",rightName:"",rightTag:"",right_describe:"",rightParentId:"",rightSort:"",addUser:"",addDatetime:"",state:""},searchKey:{id:"",rightName:"",rightTag:"",right_describe:"",rightParentId:"",rightSort:"",addUser:"",addDatetime:"",state:""},idx:-1,responseResult:[],id:""}},created:function(){this.getData(),this.right()},computed:{data:function(){return this.tableData}},mounted:function(){this.right()},methods:{right:function(){var t=localStorage.getItem("rightTags");console.log(t),-1==t.indexOf("Right_management_Handle")?this.handleVisible=!1:this.handleVisible=!0,console.log("this.handleVisible:"+this.handleVisible)},rest:function(){},handleCurrentChange:function(t){this.cur_page=t,console.log("page:"+t),this.getData()},getData:function(){var t=this;this.$axios.post(this.url,{pageNo:this.cur_page,pageSize:10,isPage:"isPage",id:"",rightName:this.searchKey.rightName,rightTag:this.searchKey.rightTag,right_describe:this.searchKey.right_describe,rightParentId:this.searchKey.rightParentId,rightSort:this.searchKey.rightSort,addUser:"",addDatetime:"",state:this.searchKey.state}).then(function(e){t.tableData=e.data.list})},search:function(){this.is_search=!0,this.getData()},stateSelect:function(){this.getData()},formatter:function(t,e){var i=t[e.property];return void 0==i?"":new Date(parseInt(i)).toLocaleString()},filterTag:function(t,e){return e.tag===t},handleEdit:function(t,e){this.idx=t;var i=this.tableData[t];this.form={id:i.id,rightName:i.rightName,rightTag:i.rightTag,right_describe:i.right_describe,rightParentId:i.rightParentId,rightSort:i.rightSort,addUser:i.addUser,addDatetime:i.addDatetime,state:i.state},this.editVisible=!0},handleChangeStateToFrozen:function(t,e){this.idx=t;this.tableData[t];this.id=this.tableData[t].id,this.changeStateToFrozenVisible=!0},handleChangeStateToNormal:function(t,e){this.idx=t;this.tableData[t];this.id=this.tableData[t].id,this.changeStateToNormalVisible=!0},handleDelete:function(t,e){this.idx=t,this.delVisible=!0,this.id=this.tableData[t].id},delAll:function(){var t=this.multipleSelection.length,e="";this.del_list=this.del_list.concat(this.multipleSelection);for(var i=0;i<t;i++)e+=this.multipleSelection[i].name+" ";this.$message.error("删除了"+e),this.multipleSelection=[]},handleSelectionChange:function(t){this.multipleSelection=t},handleAddRight:function(){this.addRightVisible=!0,this.form={id:"",rightName:"",rightTag:"",right_describe:"",rightParentId:"",rightSort:"",addUser:"",addDatetime:"",state:""}},saveAddRight:function(){var t=this;""==this.form.rightName?(console.log("权限名称不能为空"),this.$message.error("权限名称不能为空")):""==this.form.rightTag?(console.log("权限标识不能为空"),this.$message.error("权限标识不能为空")):this.$axios.post("/addRight",{id:this.form.id,rightName:this.form.rightName,rightTag:this.form.rightTag,right_describe:this.form.right_describe,rightParentId:this.form.rightParentId,rightSort:this.form.rightSort,addUser:this.form.addUser,state:this.form.state}).then(function(e){if(t.responseResult="\n"+s()(e.data),200!==e.data.code)return t.open4(e.data.message),console.log("error"),console.log(t.responseResult),t.$message.error("权限添加失败"),!1;console.log(t.responseResult),t.$message.success("权限添加成功"),t.tableData.push(t.form),t.getData()}).catch(function(t){}),this.addRightVisible=!1},saveEdit:function(){var t=this;this.$axios.post("/editRight",{id:this.form.id,rightName:this.form.rightName,rightTag:this.form.rightTag,right_describe:this.form.right_describe,rightParentId:this.form.rightParentId,rightSort:this.form.rightSort,addUser:this.form.addUser,addDatetime:this.form.addDatetime,state:this.form.state}).then(function(e){if(t.responseResult="\n"+s()(e.data),200!==e.data.code)return t.open4(e.data.message),console.log("error"),console.log(t.responseResult),t.$message.error("权限信息修改失败"),!1;console.log(t.responseResult),t.$message.success("权限信息修改成功"),t.getData()}).catch(function(t){}),this.editVisible=!1},changeStateToFrozen:function(){var t=this;this.$axios.post("/changeStateToFrozen_Right",{id:this.id}).then(function(e){if(t.responseResult="\n"+s()(e.data),200!==e.data.code)return t.open4(e.data.message),console.log("error"),console.log(t.responseResult),t.$message.error("权限冻结失败"),!1;console.log(t.responseResult),t.$message.success("权限冻结成功"),t.getData()}).catch(function(t){}),this.changeStateToFrozenVisible=!1,this.rest()},changeStateToNormal:function(){var t=this;this.$axios.post("/changeStateToNormal_Right",{id:this.id}).then(function(e){if(t.responseResult="\n"+s()(e.data),200!==e.data.code)return t.open4(e.data.message),console.log("error"),console.log(t.responseResult),t.$message.error("权限解冻失败"),!1;console.log(t.responseResult),t.$message.success("权限解冻成功"),t.getData()}).catch(function(t){}),this.changeStateToNormalVisible=!1,this.rest()},deleteRow:function(){var t=this;this.$axios.post("/deleteRight",{id:this.id}).then(function(e){if(t.responseResult="\n"+s()(e.data),200!==e.data.code)return t.open4(e.data.message),console.log("error"),console.log(t.responseResult),t.$message.error("权限删除失败"),!1;console.log(t.responseResult),t.$message.success("权限删除成功"),t.getData()}).catch(function(t){}),this.tableData.splice(this.idx,1),this.delVisible=!1},formatState:function(t,e,i,a){return 1==t.state?"已冻结":(t.sex,"正常")}}},o={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"table"},[i("div",{staticClass:"crumbs"},[i("el-breadcrumb",{attrs:{separator:"/"}},[i("el-breadcrumb-item",[i("i",{staticClass:"el-icon-lx-cascades"}),t._v("权限管理")])],1)],1),t._v(" "),i("div",{staticClass:"container"},[i("div",{staticClass:"handle-box"},[i("el-button",{staticClass:"handle-del mr10",attrs:{type:"primary",icon:"delete"},on:{click:t.delAll}},[t._v("批量删除")]),t._v(" "),i("span",{staticClass:"grid-content bg-purple-light"},[t._v("状态：")]),t._v(" "),i("el-select",{staticClass:"handle-select mr10",attrs:{placeholder:"筛选"},on:{change:t.stateSelect},model:{value:t.searchKey.state,callback:function(e){t.$set(t.searchKey,"state",e)},expression:"searchKey.state"}},[i("el-option",{key:"1",attrs:{label:"全部",value:"0"}}),t._v(" "),i("el-option",{key:"2",attrs:{label:"冻结",value:"1"}}),t._v(" "),i("el-option",{key:"3",attrs:{label:"未冻结",value:"2"}})],1),t._v(" "),i("span",{staticClass:"grid-content bg-purple-light"},[t._v("权限名：")]),t._v(" "),i("el-input",{staticClass:"handle-input ",staticStyle:{width:"150px"},attrs:{placeholder:"筛选权限名"},model:{value:t.searchKey.rightName,callback:function(e){t.$set(t.searchKey,"rightName",e)},expression:"searchKey.rightName"}}),t._v(" "),i("span",{staticClass:"grid-content bg-purple-light"},[t._v("权限标识：")]),t._v(" "),i("el-input",{staticClass:"handle-input ",staticStyle:{width:"150px"},attrs:{placeholder:"筛选权限标识"},model:{value:t.searchKey.rightTag,callback:function(e){t.$set(t.searchKey,"rightTag",e)},expression:"searchKey.rightTag"}}),t._v(" "),i("el-button",{attrs:{type:"primary",icon:"search"},on:{click:t.search}},[t._v("搜索")]),t._v(" "),i("el-button",{attrs:{type:"primary",icon:"search"},on:{click:t.handleAddRight}},[t._v("添加")])],1),t._v(" "),i("el-table",{ref:"multipleTable",staticClass:"table",attrs:{data:t.data,border:""},on:{"selection-change":t.handleSelectionChange}},[i("el-table-column",{attrs:{type:"selection",width:"55",align:"center"}}),t._v(" "),i("el-table-column",{attrs:{prop:"id",label:"ID",width:"80"}}),t._v(" "),i("el-table-column",{attrs:{prop:"rightName",label:"权限名称",width:"200"}}),t._v(" "),i("el-table-column",{attrs:{prop:"rightTag",label:"权限标识",width:"200"}}),t._v(" "),i("el-table-column",{attrs:{prop:"right_describe",label:"描述",width:"200"}}),t._v(" "),i("el-table-column",{attrs:{prop:"state",label:"状态",width:"100",formatter:t.formatState}}),t._v(" "),i("el-table-column",{attrs:{prop:"addDatetime",width:"170",label:"添加时间",formatter:t.formatter,"value-format":"YYYY-MM-DD HH:mm:ss"}}),t._v(" "),i("el-table-column",{attrs:{prop:"addUser",width:"120",label:"添加人"}}),t._v(" "),i("el-table-column",{attrs:{prop:"rightSort",width:"50",label:"排序"}}),t._v(" "),t.handleVisible?i("el-table-column",{attrs:{label:"操作",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("el-button",{attrs:{type:"text",icon:"el-icon-edit"},on:{click:function(i){t.handleEdit(e.$index,e.row)}}},[t._v("编辑")]),t._v(" "),1!=e.row.state?i("el-button",{attrs:{type:"text",icon:"el-icon-edit"},on:{click:function(i){t.handleChangeStateToFrozen(e.$index,e.row)}}},[t._v("冻结")]):t._e(),t._v(" "),1==e.row.state?i("el-button",{attrs:{type:"text",icon:"el-icon-edit"},on:{click:function(i){t.handleChangeStateToNormal(e.$index,e.row)}}},[t._v("解冻")]):t._e(),t._v(" "),i("el-button",{staticClass:"red",attrs:{type:"text",icon:"el-icon-delete"},on:{click:function(i){t.handleDelete(e.$index,e.row)}}},[t._v("删除")])]}}])}):t._e()],1),t._v(" "),i("div",{staticClass:"pagination"},[i("el-pagination",{attrs:{background:"",layout:"prev, pager, next",total:500},on:{"current-change":t.handleCurrentChange}})],1)],1),t._v(" "),i("el-dialog",{attrs:{title:"添加权限",visible:t.addRightVisible,width:"30%"},on:{"update:visible":function(e){t.addRightVisible=e}}},[i("el-form",{ref:"form",attrs:{model:t.form,"label-width":"100px"}},[i("el-form-item",{attrs:{label:"权限名称"}},[i("el-input",{model:{value:t.form.rightName,callback:function(e){t.$set(t.form,"rightName",e)},expression:"form.rightName"}})],1),t._v(" "),i("el-form-item",{attrs:{label:"权限标识"}},[i("el-input",{model:{value:t.form.rightTag,callback:function(e){t.$set(t.form,"rightTag",e)},expression:"form.rightTag"}})],1),t._v(" "),i("el-form-item",{attrs:{label:"权限描述"}},[i("el-input",{model:{value:t.form.right_describe,callback:function(e){t.$set(t.form,"right_describe",e)},expression:"form.right_describe"}})],1),t._v(" "),i("el-form-item",{attrs:{label:"添加人"}},[i("el-input",{model:{value:t.form.addUser,callback:function(e){t.$set(t.form,"addUser",e)},expression:"form.addUser"}})],1)],1),t._v(" "),i("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(e){t.addRightVisible=!1}}},[t._v("取 消")]),t._v(" "),i("el-button",{attrs:{type:"primary"},on:{click:t.saveAddRight}},[t._v("确 定")])],1)],1),t._v(" "),i("el-dialog",{attrs:{title:"编辑权限",visible:t.editVisible,width:"30%"},on:{"update:visible":function(e){t.editVisible=e}}},[i("el-form",{ref:"form",attrs:{model:t.form,"label-width":"100px"}},[i("el-form-item",{attrs:{label:"权限名称"}},[i("el-input",{model:{value:t.form.rightName,callback:function(e){t.$set(t.form,"rightName",e)},expression:"form.rightName"}})],1),t._v(" "),i("el-form-item",{attrs:{label:"权限标识"}},[i("el-input",{model:{value:t.form.rightTag,callback:function(e){t.$set(t.form,"rightTag",e)},expression:"form.rightTag"}})],1),t._v(" "),i("el-form-item",{attrs:{label:"权限描述"}},[i("el-input",{model:{value:t.form.right_describe,callback:function(e){t.$set(t.form,"right_describe",e)},expression:"form.right_describe"}})],1),t._v(" "),i("el-form-item",{attrs:{label:"添加人"}},[i("el-input",{model:{value:t.form.addUser,callback:function(e){t.$set(t.form,"addUser",e)},expression:"form.addUser"}})],1)],1),t._v(" "),i("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(e){t.editVisible=!1}}},[t._v("取 消")]),t._v(" "),i("el-button",{attrs:{type:"primary"},on:{click:t.saveEdit}},[t._v("确 定")])],1)],1),t._v(" "),i("el-dialog",{attrs:{title:"冻结提示",visible:t.changeStateToFrozenVisible,width:"300px",center:""},on:{"update:visible":function(e){t.changeStateToFrozenVisible=e}}},[i("div",{staticClass:"del-dialog-cnt"},[t._v("冻结后将停止权限使用，是否确定冻结？")]),t._v(" "),i("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(e){t.changeStateToFrozenVisible=!1}}},[t._v("取 消")]),t._v(" "),i("el-button",{attrs:{type:"primary"},on:{click:t.changeStateToFrozen}},[t._v("确 定")])],1)]),t._v(" "),i("el-dialog",{attrs:{title:"解冻提示",visible:t.changeStateToNormalVisible,width:"300px",center:""},on:{"update:visible":function(e){t.changeStateToNormalVisible=e}}},[i("div",{staticClass:"del-dialog-cnt"},[t._v("是否确定解冻？")]),t._v(" "),i("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(e){t.changeStateToNormalVisible=!1}}},[t._v("取 消")]),t._v(" "),i("el-button",{attrs:{type:"primary"},on:{click:t.changeStateToNormal}},[t._v("确 定")])],1)]),t._v(" "),i("el-dialog",{attrs:{title:"删除提示",visible:t.delVisible,width:"300px",center:""},on:{"update:visible":function(e){t.delVisible=e}}},[i("div",{staticClass:"del-dialog-cnt"},[t._v("删除不可恢复，是否确定删除？")]),t._v(" "),i("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(e){t.delVisible=!1}}},[t._v("取 消")]),t._v(" "),i("el-button",{attrs:{type:"primary"},on:{click:t.deleteRow}},[t._v("确 定")])],1)])],1)},staticRenderFns:[]};var l=i("C7Lr")(r,o,!1,function(t){i("/MqV")},"data-v-09e2ac44",null);e.default=l.exports}});